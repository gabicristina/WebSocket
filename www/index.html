<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<title>WebSocket Test</title>
<script type="text/javascript" src="cordova.js"></script>

<!-- Test Sources -->
<link rel="stylesheet" href="src/qunit.css" type="text/css"
	media="screen" />
<script src="src/qunit.js"></script>
<script src="js\vexflow-min.js"></script>

<script src="js/partitura.js"></script>
<script src="js/partitura_menor.js"></script>
<script src="js/part_complete.js"></script>
<!-- END OF MUSICXML -->

<!-- script language="javascript" type="text/javascript"
	src="js/websocket.js"></script -->
<script type="application/javascript" src="js/jquery.min.js"></script>

<script>
	var interval;
	function scrollBlocksIntoView(numberOfBlocks, viewPortName, timeout) {
        var i = 0;
        function cb() {
            var el = $("#" + viewPortName + "_canvas" + i)[0];
            if (!el) return false;
            
            el.scrollIntoView();
            
            i++;
            console.log(i);
            if (i < numberOfBlocks) {
                setTimeout(cb, timeout);
            }
        }
        cb();
    }
    
    function drawPart(container) {
        var doc = new Vex.Flow.Document(comp);
        var formatter = doc.getFormatter();
        formatter.scale = 2.0;
        formatter.setWidth(800).draw($("#" + container)[0]);

        // Numero de blocos
        var nBlocks = formatter.measuresInBlock.length;
        scrollBlocksIntoView(nBlocks, container, 3000);     
    }
    
    
	$(document).ready(function() {
		$('#btn_comecar').click(function() {
			Vex.Flow.Test.Document.Start();
		});
		$('#btn_websocket').click(function() {
			drawPart("vexflow_testoutput");
		});
	});
</script>
</head>
<body>
	<h2>WebSocket Test</h2>
	<div id="output"></div>
	<div>
		<button id="btn_comecar">Começar - código fixo</button>
	</div>
	<div style="text-align: center;">
		<h1 id="qunit-header">VexFlow Tests</h1>
		<div id="vexflow_testoutput">
			<!--  canvas class="vex-tabdiv" width="300" height="120"></canvas -->
		</div>
	</div>
	<div>
		<button id="btn_websocket">Começar - websocket</button>
	</div>
	<div id="slider"></div>
	<div class="tempo ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
		<div class="ui-slider-range ui-widget-header ui-slider-range-min" style="width: 21.578947368421055%;"></div>
		<a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 21.578947368421055%;"></a>
	</div>
	<textarea rows="10" cols="50" id="strTeste"></textarea>
	<p>retorno</p>
	<textarea rows="10" cols="50" id="strRes"></textarea>
</body>